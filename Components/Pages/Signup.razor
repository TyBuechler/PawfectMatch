@layout LoginLayout
@using PawfectMatch.Components.Layout
@page "/signup"

<h3>Sign Up</h3>

<div class="form-group">
    <label for="username">Username</label>
    <input @bind="newUsername" id="username" class="form-control" />
</div>
<div class="form-group">
    <label for="password">Password</label>
    <input @bind="newPassword" id="password" type="password" class="form-control" />
</div>
<div class="form-group">
    <label for="confirmPassword">Confirm Password</label>
    <input @bind="confirmPassword" id="confirmPassword" type="password" class="form-control" />
</div>
<button class="btn btn-primary" @onclick="SignupUser">Sign Up</button>
<p>@message</p>

<p>
    Already have an account?
    <a href="/login" @onclick="NavigateToLogin">Log in here</a>
</p>

@code {
    private string newUsername;
    private string newPassword;
    private string confirmPassword;
    private string message;

    private async Task SignupUser()
    {

        // Check if the username is already taken
        if (Users.ContainsKey(NewUsername))

        {
            message = "Username and password cannot be empty.";
            return;
        }

        if (newPassword != confirmPassword)
        {

            // Add the new user
            Users[NewUsername] = NewPassword;
            SignUpMessage = "Sign-up successful! You can now log in.";
        }

    }
}
